!function(n,t){function e(){o(["load","init"])}function o(t){for(var e=0;e<t.length;e++){var o=t[e];for(var i in n)"function"==typeof n[i][o]&&n[i][o]()}}t(e)}(window.UIM={},window.jQuery),function(n){n.components={button:{name:"Button",properties:{color:{label:"Color",type:"text",defaultValue:"primary"},text:{label:"Text",type:"text",defaultValue:"Click me"},url:{label:"URL",type:"text",defaultValue:"http://www.avanade.com"}}},"layout-12":{name:"Layout full width"},"layout-6-6":{name:"Layout 6/6 split"},"layout-8-4":{name:"Layout 8/4 split"}}}(window.UIM),function(n){function t(n){return n.content||e(n.name)}function e(t){if(!n.components[t]||!n.components[t].properties)return{};var e={},o=n.components[t].properties;for(var i in o)o.hasOwnProperty(i)&&(e[i]=o[i].defaultValue);return e}function o(t,e){return n.components[t]&&n.components[t].properties?n.components[t].properties[e].type:"text"}n.content={getContent:t,getPropertyType:o}}(window.UIM),function(n,t){function e(){a(),r(),o()}function o(){n.events.subscribe("component-created",c)}function i(n){var e=t(n);p(e,!1),l(e)}function a(){p(t("#editor-toolbox .draggable"),!0)}function r(){t("#editor-components").on("click","._component",s),t("#editor-apply-properties").on("click",m)}function c(n,t){i(t)}function s(e){e.stopPropagation(),e.preventDefault(),t("#editor-components ._component-active").removeClass("_component-active");var o=t(this),i=o.data("manifestItem");o.addClass("_component-active"),u(i),n.editor.activeItem=i,n.events.publish("component-selected",o)}function p(n,t){n.draggable({revert:t,snap:"#editor-components ._container"})}function l(e){e.find("._container").each(function(){var e=t(this);e.droppable({drop:function(o,i){n.events.publish("component-dropped",{componentName:t(i.draggable).data("componentName"),containerElement:e})}})})}function u(e){var o=t("#editor-properties");o.empty();var i=n.content.getContent(e),a=!1;for(var r in i)if(i.hasOwnProperty(r)){var c=n.content.getPropertyType(e.name,r),s='<div class="form-group row"><label for="field_0" class="col-3 col-form-label col-form-label-sm">'+r+'</label><div class="col-9"><input class="form-control form-control-sm" data-name="'+r+'" type="'+c+'" value="" id="field_0"></div></div>',p=t(s);p.find("input").val(i[r]),o.append(p),a=!0}t("#editor-properties-none")[a?"hide":"show"](),t("#editor-apply-properties")[a?"show":"hide"]()}function m(){var e={};t("#editor-properties input").each(function(){var n=t(this),o=n.data("name");e[o]=n.val()}),n.manifest.setContent(n.editor.activeItem,e)}n.editor={activeItem:null,load:e,initComponent:i}}(window.UIM,window.jQuery),function(n,t){var e=t({});n.events={subscribe:function(){e.on.apply(e,arguments)},unsubscribe:function(){e.off.apply(e,arguments)},publish:function(){e.trigger.apply(e,arguments)}}}(window.UIM,window.jQuery),function(n){function t(){n.manifest.current=r(),i()}function e(n,t){t.components=t.components||[],t.components.push(a(n)),i()}function o(n,t){n.content=t,i()}function i(){n.events.publish("manifest-changed")}function a(n){return{name:n,components:[]}}function r(){return{page:{name:"page",components:[{name:"container",components:[{name:"layout-12",components:[{name:"button",content:{color:"primary",text:"Google",url:"https://www.google.com"}},{name:"button",content:{color:"secondary",text:"Bing",url:"https://www.bing.com"}}]},{name:"layout-8-4",components:[{name:"button",content:{color:"primary",text:"Yahoo",url:"https://www.yahoo.com"},container:"left"},{name:"button",content:{color:"secondary",text:"Stack Overflow",url:"https://www.stackoverflow.com"},container:"right"}]}]}]}}}n.manifest={addComponent:e,createComponent:a,current:null,init:t,setContent:o}}(window.UIM),function(n,t,e){function o(){i()}function i(){n.events.subscribe("component-dropped",a),n.events.subscribe("manifest-changed",r)}function a(t,e){if(!e.componentName)return void console.warn("Component dropped with no name",e);var o=e.containerElement.is("._component")?e.containerElement:e.containerElement.closest("._component"),i=o.data(p);if(!i)return void console.warn("Component dropped, but parent is not bound",e);n.manifest.addComponent(e.componentName,i)}function r(){l.empty(),s(l,n.manifest.current.page),c(l,n.manifest.current.page)}function c(o,i){var a=n.templates[i.name];if(!a)return void console.warn('Missing HTML template for "'+i.name+'".');var r=n.content.getContent(i);a=e.compile(a)(r);var p=t(a).appendTo(o);p.addClass("_component"+(i===n.editor.activeItem?" _component-acive":"")),s(p,i),n.events.publish("component-created",p),i.components&&t.each(i.components,function(){var n=p.is("._container"),t="._container"+(this.container?"-"+this.container:"");c(n?p:p.find(t).first(),this)})}function s(n,t){n.data(p,t)}var p="manifestItem",l=t("#editor-components");n.renderer={load:o,renderComponent:c}}(window.UIM,window.jQuery,window.Handlebars),function(n){n.templates={button:'<a href="{{url}}" class="button button-{{color}}">{{text}}</a>',container:'<div class="container _container"></div>',"layout-12":'<div class="row"><div class="col-md-12 _container"></div></div>',"layout-6-6":'<div class="row"><div class="col-md-6 _container _container-left"></div><div class="col-md-6 _container _container-right"></div></div>',"layout-8-4":'<div class="row"><div class="col-md-8 _container _container-left"></div><div class="col-md-4 _container _container-right"></div></div>',page:'<div class="page _container"></div>'}}(window.UIM);